<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cinematic Video Stories</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#000;overflow:hidden}

.story-container{
  position:relative;
  width:100%;
  height:100vh;
}

video{
  width:100%;
  height:100%;
  object-fit:cover;
  transition:opacity 0.5s ease;
}

/* cinematic vignette */
.story-container::after{
  content:"";
  position:absolute;
  inset:0;
  background:radial-gradient(circle at center,
    rgba(0,0,0,0) 35%,
    rgba(0,0,0,.7) 100%);
  pointer-events:none;
}

/* progress bars */
.progress-bars{
  position:absolute;
  bottom:20px;
  left:14px;
  right:14px;
  display:flex;
  gap:6px;
  z-index:10;
}
.bar{flex:1;height:3px;background:rgba(255,255,255,.25)}
.bar span{display:block;height:100%;width:0;background:#fff}

/* navigation */
.nav{
  position:absolute;
  top:0;
  width:50%;
  height:100%;
  z-index:5;
}

.mainLogo h2{
color: white;
position: absolute;
top: 50%;
left: 50%;
font-weight: 900;
font-size: 30px;
}
.nav.left{left:0}
.nav.right{right:0}
</style>
</head>

<body>

<div class="story-container">

<video id="video" muted playsinline preload="auto"></video>

<div class="mainLogo">
    <h2>S</h2>
</div>

<div class="progress-bars">
  <div class="bar"><span></span></div>
  <div class="bar"><span></span></div>
  <div class="bar"><span></span></div>
  <div class="bar"><span></span></div>
</div>

<div class="nav left"></div>
<div class="nav right"></div>

</div>

<script>
const videos = [
  "img/12.mp4",
  "img/12.mp4",
  "img/12.mp4",
  "img/12.mp4"
];

let index = 0;
const video = document.getElementById("video");
const bars = document.querySelectorAll(".bar span");

function loadVideo(i){
  bars.forEach(b=>b.style.width="0%");
  video.pause();
  video.style.opacity=0;

  video.src = videos[i];
  video.load();

  video.onloadeddata = () => {
    video.play();
    video.style.opacity = 1;
  };
}

let raf;
function animateBar(){
    if(!video.duration) return;

    bars[index].style.width =
    (video.currentTime / video.duration) * 100 + "%";

    raf = requestAnimationFrame(animateBar);
}
    video.onplay = () => {
        cancelAnimationFrame(raf);
        animateBar();
    };
    video.onpause = () =>{
        cancelAnimationFrame(raf);
    }

video.onended = () => {
  index = (index + 1) % videos.length;
  loadVideo(index);
};

document.querySelector(".nav.right").onclick = () => {
  index = (index + 1) % videos.length;
  loadVideo(index);
};

document.querySelector(".nav.left").onclick = () => {
  index = (index - 1 + videos.length) % videos.length;
  loadVideo(index);
};

loadVideo(index);
</script>

</body>
</html>